{% extends "base.html" %}
{% block content %}
<h2>ðŸ’³ Payments</h2>

<div class="d-flex justify-content-between align-items-center mb-2">
  <h4>All Payments</h4>
  <form method="POST" action="{{ url_for('clear_history') }}" onsubmit="return confirm('Are you sure you want to clear all payment history?');">
    <button class="btn btn-sm btn-danger">Clear History</button>
  </form>
</div>

<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>Payment ID</th>
      <th>Order ID</th>
      <th>Amount (â‚¹)</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for p in payments %}
    <tr>
      <td>{{ p.payment_id }}</td>
      <td>{{ p.order_id or "N/A" }}</td>
      <td>â‚¹{{ "%.2f"|format(p.amount) }}</td>
      <td>
        {% if p.status.upper() == "VERIFIED" %}
          <span class="badge bg-success badge-status">Success</span>
        {% elif p.status.upper() == "UNVERIFIED" %}
          <span class="badge bg-warning text-dark badge-status">Pending</span>
        {% else %}
          <span class="badge bg-danger badge-status">{{ p.status }}</span>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
