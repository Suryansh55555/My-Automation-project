<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VastraVibe</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: linear-gradient(135deg, #6d28d9, #2563eb);
      --bg: #f4f6f9;
      --text: #1e293b;
      --card-bg: #fff;
      --accent: #2563eb;
    }
    [data-theme="dark"] {
      --bg: #0f172a;
      --text: #f1f5f9;
      --card-bg: #1e293b;
      --accent: #93c5fd;
    }
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }
    /* Splash */
    #splash {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: #0f172a;
      color: white;
      display: flex; justify-content: center; align-items: center;
      flex-direction: column;
      z-index: 1000;
      animation: fadeOut 1s ease 3s forwards;
    }
    #splash h1 {
      font-family: 'Playfair Display', serif;
      font-size: 3rem;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: glow 2s infinite alternate;
    }
    @keyframes glow { from { text-shadow: 0 0 10px rgba(255,255,255,0.2);} to { text-shadow: 0 0 20px rgba(255,255,255,0.6);} }
    @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }
    /* Navbar */
    nav {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem 2rem;
      background: var(--card-bg);
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      position: sticky; top: 0; z-index: 1000;
    }
    nav .logo { font-family: 'Playfair Display', serif; font-size: 1.8rem; background: var(--primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    nav ul { list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; }
    nav ul li a { text-decoration: none; color: var(--text); font-weight: 600; transition: color 0.3s; cursor:pointer; }
    nav ul li a:hover { color: var(--accent); }
    /* Hero Banner */
    .hero { position: relative; height: 300px; display: flex; align-items: center; justify-content: center; text-align: center; background: url('https://source.unsplash.com/1600x600/?fashion,clothes') center/cover no-repeat; color: white; }
    .hero h1 { font-size: 2.5rem; background: rgba(0,0,0,0.5); padding: 10px 20px; border-radius: 10px; }
    /* Section titles */
    h2 { margin: 50px 0 20px; text-align: center; font-size: 1.8rem; color: #475569; position: relative; }
    h2::after { content: ''; width: 60px; height: 4px; background: var(--primary); display: block; margin: 10px auto 0; border-radius: 2px; }
    /* Product grid */
    .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; padding: 0 20px; }
    .product { background: var(--card-bg); border-radius: 16px; width: 280px; padding: 15px; text-align: center; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
    .product:hover { transform: scale(1.05); box-shadow: 0 10px 24px rgba(0,0,0,0.2); }
    .product img { width: 100%; border-radius: 12px; transition: transform 0.4s; }
    .product:hover img { transform: scale(1.08); }
    .product h3 { margin: 15px 0 5px; font-size: 1.1em; }
    .product b { font-size: 1.3em; color: var(--accent); }
    .product a { text-decoration: none; color: inherit; display: block; }
    /* About & Contact sections */
    #about, #contact { padding: 50px 20px; background: var(--card-bg); margin:50px 0; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); max-width:900px; margin-left:auto; margin-right:auto; }
    #about h2, #contact h2 { margin-top:0; }
    #about p, #contact p { line-height:1.6; color:#334155; }
    /* Floating buttons */
    .floating-btn { position: fixed; bottom: 20px; right: 20px; background: var(--primary); color: white; padding: 15px; border-radius: 50%; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: pointer; transition: transform 0.2s; }
    .floating-btn:hover { transform: scale(1.1); }
    /* Dark mode toggle */
    #toggle-theme { position: fixed; bottom: 20px; left: 20px; padding: 10px 14px; border-radius: 30px; background: var(--card-bg); color: var(--text); box-shadow: 0 2px 8px rgba(0,0,0,0.1); cursor: pointer; }
    /* Footer */
    footer { margin-top: 50px; background: var(--card-bg); padding: 2rem; text-align: center; font-size: 0.9rem; color: #64748b; }
    footer a { color: var(--accent); text-decoration: none; }
    footer a:hover { text-decoration: underline; }
  </style>
</head>
<body>

  <!-- Splash -->
  <div id="splash">
    <h1>‚ú® VastraVibe ‚ú®</h1>
    <p>Your Style. Your Vibe.</p>
  </div>

  <!-- Navbar -->
  <nav>
    <div class="logo">VastraVibe</div>
    <ul>
      <li><a onclick="scrollToSection('about')">About</a></li>
      <li><a onclick="scrollToSection('contact')">Contact</a></li>
    </ul>
  </nav>

  <!-- Hero Banner -->
  <div class="hero">
    <h1>Discover Your Vibe ‚ú®</h1>
  </div>

  <!-- Manual Products -->
  {% if db_products and db_products|length > 0 %}
    <h2 id="Our-Collection">Our Collection</h2>
    <div class="container">
      {% for p in db_products %}
        <div class="product">
          <a href="{{ url_for('product_detail', product_key=p['slug']) }}">
            <img src="{{ p['image_url'] or 'https://via.placeholder.com/300x300.png?text=No+Image' }}" 
                 alt="{{ p.get('name','Product') }}" 
                 onerror="this.src='https://via.placeholder.com/300x300.png?text=No+Image'"
                 loading="lazy">
            <h3>{{ p.get('name','Product') }}</h3>
            <b>‚Çπ{{ "%.2f"|format(p.get('price',0)) }}</b>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Sheets products -->
  {% for tab_name, products in sheets_data.items() %}
    <h2 id="{{ tab_name|replace(' ', '-')}}">{{ tab_name }}</h2>
    <div class="container">
      {% for p in products %}
        {% if p['image_url'] and p['image_url']|trim != '' and p['image_url']|lower not in ['null','nan'] and p['image_url'].startswith('http') %}
          {% set images = p['image_url'].split(',')|map('trim')|list %}
          {% if images and images[0]|trim != '' %}
            <div class="product">
              <a href="{{ url_for('product_detail', product_key=p['slug']) }}">
                <img src="{{ images[0] if images[0]|trim != '' else 'https://via.placeholder.com/300x300.png?text=No+Image' }}" 
                     alt="{{ p.get('name','Product') }}" 
                     onerror="this.src='https://via.placeholder.com/300x300.png?text=No+Image'"
                     loading="lazy">
                <h3>{{ p.get('name','Product') }}</h3>
                <b>‚Çπ{{ "%.2f"|format(p.get('price',0)) }}</b>
              </a>
            </div>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  {% endfor %}

  <!-- About Section -->
  <section id="about">
    <h2>About VastraVibe</h2>
    <p>VastraVibe is a modern fashion store committed to bringing you the latest trends with unmatched quality. Our mission is to let everyone discover their unique style and vibe. We combine premium products with an exceptional shopping experience for all fashion enthusiasts.</p>
  </section>

  <!-- Contact Section -->
  <section id="contact">
    <h2>Contact Us</h2>
    <p>Email: contact@vastravibe.com</p>
    <p>Phone: +91 98765 43210</p>
    <p>Address: 123 Fashion Street, Mumbai, India</p>
  </section>

  <!-- Floating Cart -->
  <div class="floating-btn" onclick="alert('Cart feature coming soon! üõí')">üõí</div>

  <!-- Dark Mode -->
  <div id="toggle-theme">üåô Dark Mode</div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 VastraVibe. All rights reserved.</p>
    <p><a href="#">Privacy Policy</a> | <a href="#">Terms</a> | <a href="#">Instagram</a></p>
  </footer>

  <script>
    // Scroll to section
    function scrollToSection(id) {
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth'});
    }

    // Username greeting
    document.addEventListener("DOMContentLoaded", function() {
      let username = localStorage.getItem("vastravibe_username");
      if (!username) {
        username = prompt("Welcome to VastraVibe! What's your good name?");
        if (username) localStorage.setItem("vastravibe_username", username);
      }
      if (username) {
        document.querySelector(".hero h1").innerText = "Welcome, " + username + " ‚ú®";
      }
    });

    // Dark mode toggle
    const toggleBtn = document.getElementById("toggle-theme");
    toggleBtn.addEventListener("click", () => {
      if (document.body.getAttribute("data-theme") === "dark") {
        document.body.removeAttribute("data-theme");
        toggleBtn.innerText = "üåô Dark Mode";
      } else {
        document.body.setAttribute("data-theme", "dark");
        toggleBtn.innerText = "‚òÄÔ∏è Light Mode";
      }
    });
  </script>

</body>
</html>
